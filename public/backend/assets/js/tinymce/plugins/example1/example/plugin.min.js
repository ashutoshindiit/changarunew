tinymce.PluginManager.add("example", function(a, b) {
    a.addButton("example", {
        text: "Add Youtube Video",
        icon: !1,
        onclick: function() {
            a.windowManager.open({
                title: "Enter youtube url",
                body: [{
                    type: "textbox",
                    name: "title",
                    label: "Enter Url"
                    
                },
                
	          {
                    type: "textbox",
                    name: "width",
                    label: "Enter width",
                    value: "855"
                   },
				   {
                    type: "textbox",
                    name: "height",
                    label: "Enter height",
                    value: "480"
                   }


                ],
                onsubmit: function(b) {
					if((b.data.title).trim()==""){
						alert("Please Enter url");
						return false;
					}

                                       
					  var url=b.data.title;
                                         var width=b.data.width;
					 var height=b.data.height;
                                         var w=parseInt(width);
                                         var h=parseInt(height);
                                         
                                        
                                        

                                        var matches =url.match(/^https:\/\/(?:www\.)?youtube.com\/watch\?v=\w+(&\S*)?$/);

if(width!="" && $.isNumeric(width)==false) {
    alert('Please Enter Number Only in width field!')
    return false;
}
if(height!="" && $.isNumeric(height)==false) {
    alert('Please Enter Number Only in height field!')
    return false;
}
if(w<100){
   alert('Min width 100 Allowed')
    return false;
}
if(h<100){
   alert('Min height 100 Allowed')
    return false;
}
if(w>1000){
   alert('Max width 1000 Allowed')
    return false;
}
if(h>561){
   alert('Max height 561 Allowed')
    return false;
}
if (matches) {
    
} else {
    alert('Please Enter Valid YouTube url')
    return false;
}
					 regexRes = url.match("[\\?&]v=([^&#]*)");
                     code =  $.trim( (regexRes === null) ? url : regexRes[1] );
                     
					
                      var iFrame='<p><img id="'+code+'" src="http://img.youtube.com/vi/'+code+'/hqdefault.jpg" height="'+height+'" width="'+width+'" alt="thumbnail"/></p>'; 
					
                    a.insertContent(iFrame);
					
                }
            })
        }
    }), a.addMenuItem("example", {
        text: "Enter youtube url",
        context: "tools",
        onclick: function() {
            a.windowManager.open({
                title: "TinyMCE site",
                url: b + "/dialog.html",
                width: 600,
                height: 400,
                buttons: [{
                    text: "Insert",
                    onclick: function() {
                        var b = a.windowManager.getWindows()[0];
                        a.insertContent(b.getContentWindow().document.getElementById("content").value), b.close()
						
                    }
                }, {
                    text: "Close",
                    onclick: "close"
                }]
            })
        }
    })
});